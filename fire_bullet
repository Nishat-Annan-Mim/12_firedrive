def fire_bullet():
    """Fire a bullet from the gun"""
    global bullets, bullet_count, camera_shake_timer, camera_shake_intensity
    if bullet_count <= 0:
        return
    total_rotation = player_rotation + gun_rotation
    angle_rad = math.radians(total_rotation)
    start_x = player_pos[0] + math.sin(angle_rad) * 50
    start_y = player_pos[1] + 55
    start_z = player_pos[2] + math.cos(angle_rad) * 50
    vel_x = math.sin(angle_rad) * BULLET_SPEED
    vel_y = 0
    vel_z = math.cos(angle_rad) * BULLET_SPEED
    bullets.append([start_x, start_y, start_z, vel_x, vel_y, vel_z])
    bullet_count -= 1
    if camera_mode == 'first_person':
        camera_shake_timer = 10
        camera_shake_intensity = 2.0
    print(f"Bullet fired! Remaining: {bullet_count}")
